import{bz as I,bA as F,r as f,az as N,bB as G,bC as B,aV as Q,aR as M,bD as Y,bE as S,bF as Z,bG as q,bH as K,bI as ee,bJ as ne,bK as te,j as re,be as ie}from"./index.ac2f3f2a1682498936609.js";function R(n){I&&(F(n)||console.error(`useMemoizedFn expected parameter is a function, got ${typeof n}`));const e=f.exports.useRef(n);e.current=f.exports.useMemo(()=>n,[n]);const t=f.exports.useRef();return t.current||(t.current=function(...r){return e.current.apply(this,r)}),t.current}const k=(n,{manual:e,ready:t=!0,defaultParams:r=[],refreshDeps:i=[],refreshDepsAction:s})=>{const a=f.exports.useRef(!1);return a.current=!1,N(()=>{!e&&t&&(a.current=!0,n.run(...r))},[t]),N(()=>{a.current||e||(a.current=!0,s?s():n.refresh())},[...i]),{onBefore:()=>{if(!t)return{stopNow:!0}}}};k.onInit=({ready:n=!0,manual:e})=>({loading:!e&&n});const se=k;function V(n,e){const{current:t}=f.exports.useRef({deps:e,obj:void 0,initialized:!1});return(t.initialized===!1||!G(t.deps,e))&&(t.deps=e,t.obj=n(),t.initialized=!0),t.obj}const O=new Map,ue=(n,e,t)=>{const r=O.get(n);r!=null&&r.timer&&clearTimeout(r.timer);let i;e>-1&&(i=setTimeout(()=>{O.delete(n)},e)),O.set(n,Object.assign(Object.assign({},t),{timer:i}))},oe=n=>O.get(n),E=new Map,ae=n=>E.get(n),ce=(n,e)=>{E.set(n,e),e.then(t=>(E.delete(n),t)).catch(()=>{E.delete(n)})},x={},le=(n,e)=>{x[n]&&x[n].forEach(t=>t(e))},C=(n,e)=>(x[n]||(x[n]=[]),x[n].push(e),function(){const r=x[n].indexOf(e);x[n].splice(r,1)}),fe=(n,{cacheKey:e,cacheTime:t=5*60*1e3,staleTime:r=0,setCache:i,getCache:s})=>{const a=f.exports.useRef(),o=f.exports.useRef(),u=(l,c)=>{i?i(c):ue(l,t,c),le(l,c.data)},d=(l,c=[])=>s?s(c):oe(l);return V(()=>{if(!e)return;const l=d(e);l&&Object.hasOwnProperty.call(l,"data")&&(n.state.data=l.data,n.state.params=l.params,(r===-1||new Date().getTime()-l.time<=r)&&(n.state.loading=!1)),a.current=C(e,c=>{n.setState({data:c})})},[]),B(()=>{var l;(l=a.current)===null||l===void 0||l.call(a)}),e?{onBefore:l=>{const c=d(e,l);return!c||!Object.hasOwnProperty.call(c,"data")?{}:r===-1||new Date().getTime()-c.time<=r?{loading:!1,data:c==null?void 0:c.data,error:void 0,returnNow:!0}:{data:c==null?void 0:c.data,error:void 0}},onRequest:(l,c)=>{let m=ae(e);return m&&m!==o.current?{servicePromise:m}:(m=l(...c),o.current=m,ce(e,m),{servicePromise:m})},onSuccess:(l,c)=>{var m;e&&((m=a.current)===null||m===void 0||m.call(a),u(e,{data:l,params:c,time:new Date().getTime()}),a.current=C(e,h=>{n.setState({data:h})}))},onMutate:l=>{var c;e&&((c=a.current)===null||c===void 0||c.call(a),u(e,{data:l,params:n.state.params,time:new Date().getTime()}),a.current=C(e,m=>{n.setState({data:m})}))}}:{}},de=fe;var me=Q,ge=function(){return me.Date.now()},ve=ge,be=/\s/;function he(n){for(var e=n.length;e--&&be.test(n.charAt(e)););return e}var pe=he,xe=pe,Re=/^\s+/;function Pe(n){return n&&n.slice(0,xe(n)+1).replace(Re,"")}var _e=Pe,we=_e,L=M,Te=Y,z=0/0,Oe=/^[-+]0x[0-9a-f]+$/i,Ee=/^0b[01]+$/i,Se=/^0o[0-7]+$/i,$e=parseInt;function Ae(n){if(typeof n=="number")return n;if(Te(n))return z;if(L(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=L(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=we(n);var t=Ee.test(n);return t||Se.test(n)?$e(n.slice(2),t?2:8):Oe.test(n)?z:+n}var je=Ae,Ce=M,y=ve,U=je,ye="Expected a function",Ne=Math.max,Fe=Math.min;function Be(n,e,t){var r,i,s,a,o,u,d=0,l=!1,c=!1,m=!0;if(typeof n!="function")throw new TypeError(ye);e=U(e)||0,Ce(t)&&(l=!!t.leading,c="maxWait"in t,s=c?Ne(U(t.maxWait)||0,e):s,m="trailing"in t?!!t.trailing:m);function h(g){var p=r,_=i;return r=i=void 0,d=g,a=n.apply(_,p),a}function $(g){return d=g,o=setTimeout(v,e),l?h(g):a}function A(g){var p=g-u,_=g-d,H=e-p;return c?Fe(H,s-_):H}function P(g){var p=g-u,_=g-d;return u===void 0||p>=e||p<0||c&&_>=s}function v(){var g=y();if(P(g))return b(g);o=setTimeout(v,A(g))}function b(g){return o=void 0,m&&r?h(g):(r=i=void 0,a)}function X(){o!==void 0&&clearTimeout(o),d=0,r=u=i=o=void 0}function J(){return o===void 0?a:b(y())}function j(){var g=y(),p=P(g);if(r=arguments,i=this,u=g,p){if(o===void 0)return $(u);if(c)return clearTimeout(o),o=setTimeout(v,e),h(u)}return o===void 0&&(o=setTimeout(v,e)),a}return j.cancel=X,j.flush=J,j}var W=Be;const Me=(n,{debounceWait:e,debounceLeading:t,debounceTrailing:r,debounceMaxWait:i})=>{const s=f.exports.useRef(),a=f.exports.useMemo(()=>{const o={};return t!==void 0&&(o.leading=t),r!==void 0&&(o.trailing=r),i!==void 0&&(o.maxWait=i),o},[t,r,i]);return f.exports.useEffect(()=>{if(e){const o=n.runAsync.bind(n);return s.current=W(u=>{u()},e,a),n.runAsync=(...u)=>new Promise((d,l)=>{var c;(c=s.current)===null||c===void 0||c.call(s,()=>{o(...u).then(d).catch(l)})}),()=>{var u;(u=s.current)===null||u===void 0||u.cancel(),n.runAsync=o}}},[e,a]),e?{onCancel:()=>{var o;(o=s.current)===null||o===void 0||o.cancel()}}:{}},De=Me,He=(n,{loadingDelay:e})=>{const t=f.exports.useRef();if(!e)return{};const r=()=>{t.current&&clearTimeout(t.current)};return{onBefore:()=>(r(),t.current=setTimeout(()=>{n.setState({loading:!0})},e),{loading:!1}),onFinally:()=>{r()},onCancel:()=>{r()}}},Le=He;function D(){return S?document.visibilityState!=="hidden":!0}const w=[];function ze(n){return w.push(n),function(){const t=w.indexOf(n);w.splice(t,1)}}if(S){const n=()=>{if(!!D())for(let e=0;e<w.length;e++){const t=w[e];t()}};window.addEventListener("visibilitychange",n,!1)}const Ue=(n,{pollingInterval:e,pollingWhenHidden:t=!0,pollingErrorRetryCount:r=-1})=>{const i=f.exports.useRef(),s=f.exports.useRef(),a=f.exports.useRef(0),o=()=>{var u;i.current&&clearTimeout(i.current),(u=s.current)===null||u===void 0||u.call(s)};return N(()=>{e||o()},[e]),e?{onBefore:()=>{o()},onError:()=>{a.current+=1},onSuccess:()=>{a.current=0},onFinally:()=>{r===-1||r!==-1&&a.current<=r?i.current=setTimeout(()=>{!t&&!D()?s.current=ze(()=>{n.refresh()}):n.refresh()},e):a.current=0},onCancel:()=>{o()}}:{}},Ie=Ue;function qe(n,e){let t=!1;return(...r)=>{t||(t=!0,n(...r),setTimeout(()=>{t=!1},e))}}function ke(){return S&&typeof navigator.onLine<"u"?navigator.onLine:!0}const T=[];function Ve(n){return T.push(n),function(){const t=T.indexOf(n);t>-1&&T.splice(t,1)}}if(S){const n=()=>{if(!(!D()||!ke()))for(let e=0;e<T.length;e++){const t=T[e];t()}};window.addEventListener("visibilitychange",n,!1),window.addEventListener("focus",n,!1)}const We=(n,{refreshOnWindowFocus:e,focusTimespan:t=5e3})=>{const r=f.exports.useRef(),i=()=>{var s;(s=r.current)===null||s===void 0||s.call(r)};return f.exports.useEffect(()=>{if(e){const s=qe(n.refresh.bind(n),t);r.current=Ve(()=>{s()})}return()=>{i()}},[e,t]),B(()=>{i()}),{}},Xe=We,Je=(n,{retryInterval:e,retryCount:t})=>{const r=f.exports.useRef(),i=f.exports.useRef(0),s=f.exports.useRef(!1);return t?{onBefore:()=>{s.current||(i.current=0),s.current=!1,r.current&&clearTimeout(r.current)},onSuccess:()=>{i.current=0},onError:()=>{if(i.current+=1,t===-1||i.current<=t){const a=e??Math.min(1e3*Math.pow(2,i.current),3e4);r.current=setTimeout(()=>{s.current=!0,n.refresh()},a)}else i.current=0},onCancel:()=>{i.current=0,r.current&&clearTimeout(r.current)}}:{}},Ge=Je;var Qe=W,Ye=M,Ze="Expected a function";function Ke(n,e,t){var r=!0,i=!0;if(typeof n!="function")throw new TypeError(Ze);return Ye(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),Qe(n,e,{leading:r,maxWait:e,trailing:i})}var en=Ke;const nn=(n,{throttleWait:e,throttleLeading:t,throttleTrailing:r})=>{const i=f.exports.useRef(),s={};return t!==void 0&&(s.leading=t),r!==void 0&&(s.trailing=r),f.exports.useEffect(()=>{if(e){const a=n.runAsync.bind(n);return i.current=en(o=>{o()},e,s),n.runAsync=(...o)=>new Promise((u,d)=>{var l;(l=i.current)===null||l===void 0||l.call(i,()=>{a(...o).then(u).catch(d)})}),()=>{var o;n.runAsync=a,(o=i.current)===null||o===void 0||o.cancel()}}},[e,t,r]),e?{onCancel:()=>{var a;(a=i.current)===null||a===void 0||a.cancel()}}:{}},tn=nn,rn=n=>{I&&(F(n)||console.error(`useMount: parameter \`fn\` expected to be a function, but got "${typeof n}".`)),f.exports.useEffect(()=>{n==null||n()},[])},sn=rn,un=()=>{const[,n]=f.exports.useState({});return f.exports.useCallback(()=>n({}),[])},on=un;class an{constructor(e,t,r,i={}){this.serviceRef=e,this.options=t,this.subscribe=r,this.initState=i,this.count=0,this.state={loading:!1,params:void 0,data:void 0,error:void 0},this.state=Object.assign(Object.assign(Object.assign({},this.state),{loading:!t.manual}),i)}setState(e={}){this.state=Object.assign(Object.assign({},this.state),e),this.subscribe()}runPluginHandler(e,...t){const r=this.pluginImpls.map(i=>{var s;return(s=i[e])===null||s===void 0?void 0:s.call(i,...t)}).filter(Boolean);return Object.assign({},...r)}runAsync(...e){var t,r,i,s,a,o,u,d,l,c;return Z(this,void 0,void 0,function*(){this.count+=1;const m=this.count,h=this.runPluginHandler("onBefore",e),{stopNow:$=!1,returnNow:A=!1}=h,P=q(h,["stopNow","returnNow"]);if($)return new Promise(()=>{});if(this.setState(Object.assign({loading:!0,params:e},P)),A)return Promise.resolve(P.data);(r=(t=this.options).onBefore)===null||r===void 0||r.call(t,e);try{let{servicePromise:v}=this.runPluginHandler("onRequest",this.serviceRef.current,e);v||(v=this.serviceRef.current(...e));const b=yield v;return m!==this.count?new Promise(()=>{}):(this.setState({data:b,error:void 0,loading:!1}),(s=(i=this.options).onSuccess)===null||s===void 0||s.call(i,b,e),this.runPluginHandler("onSuccess",b,e),(o=(a=this.options).onFinally)===null||o===void 0||o.call(a,e,b,void 0),m===this.count&&this.runPluginHandler("onFinally",e,b,void 0),b)}catch(v){if(m!==this.count)return new Promise(()=>{});throw this.setState({error:v,loading:!1}),(d=(u=this.options).onError)===null||d===void 0||d.call(u,v,e),this.runPluginHandler("onError",v,e),(c=(l=this.options).onFinally)===null||c===void 0||c.call(l,e,void 0,v),m===this.count&&this.runPluginHandler("onFinally",e,void 0,v),v}})}run(...e){this.runAsync(...e).catch(t=>{this.options.onError||console.error(t)})}cancel(){this.count+=1,this.setState({loading:!1}),this.runPluginHandler("onCancel")}refresh(){this.run(...this.state.params||[])}refreshAsync(){return this.runAsync(...this.state.params||[])}mutate(e){const t=F(e)?e(this.state.data):e;this.runPluginHandler("onMutate",t),this.setState({data:t})}}function cn(n,e={},t=[]){const{manual:r=!1}=e,i=q(e,["manual"]),s=Object.assign({manual:r},i),a=K(n),o=on(),u=V(()=>{const d=t.map(l=>{var c;return(c=l==null?void 0:l.onInit)===null||c===void 0?void 0:c.call(l,s)}).filter(Boolean);return new an(a,s,o,Object.assign({},...d))},[]);return u.options=s,u.pluginImpls=t.map(d=>d(u,s)),sn(()=>{if(!r){const d=u.state.params||e.defaultParams||[];u.run(...d)}}),B(()=>{u.cancel()}),{loading:u.state.loading,data:u.state.data,error:u.state.error,params:u.state.params||[],cancel:R(u.cancel.bind(u)),refresh:R(u.refresh.bind(u)),refreshAsync:R(u.refreshAsync.bind(u)),run:R(u.run.bind(u)),runAsync:R(u.runAsync.bind(u)),mutate:R(u.mutate.bind(u))}}function fn(n,e,t){return cn(n,e,[...t||[],De,Le,Ie,Xe,tn,se,de,Ge])}function dn(n){const{stopPropagation:e=!1,className:t=""}=n,r=f.exports.useContext(ee),i=f.exports.useRef(null);return ne(()=>{r.focusInput()},i),te("click",s=>{e&&s.stopPropagation(),s.target.nodeName==="INPUT"?(r.unfocusInput(),setTimeout(()=>{s.target.focus()},0)):r.focusInput()},{target:i}),re("div",{className:ie("terminal-inner-wrapper",t||""),ref:i,children:n.children})}export{dn as T,fn as u};
