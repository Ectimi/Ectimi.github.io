(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{"3imC":function(e,a,t){"use strict";t.r(a);t("cIOH"),t("KCY9");var r=t("rePB"),n=t("wx14"),l=t("cDcd"),c=t("eHJ2"),o=t.n(c),i=t("+6Fa"),s=t("KQm4"),u=t("ODXe"),d=t("bT9E"),b=t("H84U"),p=function(e,a){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&a.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)a.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(t[r[n]]=e[r[n]])}return t},m=l["createContext"](null),f=function(e){var a=e.defaultValue,t=e.children,c=e.options,i=void 0===c?[]:c,f=e.prefixCls,j=e.className,v=e.style,O=e.onChange,g=p(e,["defaultValue","children","options","prefixCls","className","style","onChange"]),h=l["useContext"](b["b"]),y=h.getPrefixCls,C=h.direction,w=l["useState"](g.value||a||[]),E=Object(u["a"])(w,2),k=E[0],N=E[1],P=l["useState"]([]),V=Object(u["a"])(P,2),L=V[0],I=V[1];l["useEffect"]((function(){"value"in g&&N(g.value||[])}),[g.value]);var S=function(){return i.map((function(e){return"string"===typeof e?{label:e,value:e}:e}))},F=function(e){I((function(a){return a.filter((function(a){return a!==e}))}))},M=function(e){I((function(a){return[].concat(Object(s["a"])(a),[e])}))},R=function(e){var a=k.indexOf(e.value),t=Object(s["a"])(k);-1===a?t.push(e.value):t.splice(a,1),"value"in g||N(t);var r=S();null===O||void 0===O||O(t.filter((function(e){return-1!==L.indexOf(e)})).sort((function(e,a){var t=r.findIndex((function(a){return a.value===e})),n=r.findIndex((function(e){return e.value===a}));return t-n})))},T=y("checkbox",f),H="".concat(T,"-group"),K=Object(d["a"])(g,["value","disabled"]);i&&i.length>0&&(t=S().map((function(e){return l["createElement"](x,{prefixCls:T,key:e.value.toString(),disabled:"disabled"in e?e.disabled:g.disabled,value:e.value,checked:-1!==k.indexOf(e.value),onChange:e.onChange,className:"".concat(H,"-item"),style:e.style},e.label)})));var _={toggleOption:R,value:k,disabled:g.disabled,name:g.name,registerValue:M,cancelValue:F},B=o()(H,Object(r["a"])({},"".concat(H,"-rtl"),"rtl"===C),j);return l["createElement"]("div",Object(n["a"])({className:B,style:v},K),l["createElement"](m.Provider,{value:_},t))},j=l["memo"](f),v=t("uaoM"),O=function(e,a){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&a.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)a.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(t[r[n]]=e[r[n]])}return t},g=function(e,a){var t,c=e.prefixCls,s=e.className,u=e.children,d=e.indeterminate,p=void 0!==d&&d,f=e.style,j=e.onMouseEnter,g=e.onMouseLeave,h=e.skipGroup,x=void 0!==h&&h,y=O(e,["prefixCls","className","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup"]),C=l["useContext"](b["b"]),w=C.getPrefixCls,E=C.direction,k=l["useContext"](m),N=l["useRef"](y.value);l["useEffect"]((function(){null===k||void 0===k||k.registerValue(y.value),Object(v["a"])("checked"in y||!!k||!("value"in y),"Checkbox","`value` is not a valid prop, do you mean `checked`?")}),[]),l["useEffect"]((function(){if(!x)return y.value!==N.current&&(null===k||void 0===k||k.cancelValue(N.current),null===k||void 0===k||k.registerValue(y.value)),function(){return null===k||void 0===k?void 0:k.cancelValue(y.value)}}),[y.value]);var P=w("checkbox",c),V=Object(n["a"])({},y);k&&!x&&(V.onChange=function(){y.onChange&&y.onChange.apply(y,arguments),k.toggleOption&&k.toggleOption({label:u,value:y.value})},V.name=k.name,V.checked=-1!==k.value.indexOf(y.value),V.disabled=y.disabled||k.disabled);var L=o()((t={},Object(r["a"])(t,"".concat(P,"-wrapper"),!0),Object(r["a"])(t,"".concat(P,"-rtl"),"rtl"===E),Object(r["a"])(t,"".concat(P,"-wrapper-checked"),V.checked),Object(r["a"])(t,"".concat(P,"-wrapper-disabled"),V.disabled),t),s),I=o()(Object(r["a"])({},"".concat(P,"-indeterminate"),p));return l["createElement"]("label",{className:L,style:f,onMouseEnter:j,onMouseLeave:g},l["createElement"](i["a"],Object(n["a"])({},V,{prefixCls:P,className:I,ref:a})),void 0!==u&&l["createElement"]("span",null,u))},h=l["forwardRef"](g);h.displayName="Checkbox";var x=h,y=x;y.Group=j,y.__ANT_CHECKBOX=!0;var C,w=y,E=(t("+L6B"),t("2/Rp")),k=(t("5NDa"),t("5rEg")),N=(t("miYZ"),t("tsqr")),P=(t("y8nQ"),t("Vl3Y")),V=t("tJVT"),L=(t("oMEu"),t("9kvl")),I=t("eZYV"),S=t("p46w"),F=t.n(S),M=t("78fS"),R=t("15zK"),T=t("bHDr"),H=t.n(T),K=t("nKUr");(function(e){e[e["Login"]=0]="Login",e[e["Register"]=1]="Register"})(C||(C={}));var _={span:16},B=e=>{var a=P["a"].useForm(),t=Object(V["a"])(a,1),r=t[0],n=Object(l["useState"])(C.Login),c=Object(V["a"])(n,2),o=c[0],i=c[1],s=Object(l["useState"])(),u=Object(V["a"])(s,2),d=u[0],b=u[1],p=Object(I["a"])(),m=Object(V["a"])(p,2),f=m[0],j=m[1],v=()=>{b(r.getFieldsValue())},O=e=>{var a=o===C.Login?"/api/users/login":"/api/users/create";j({url:a,method:"POST",data:{username:e.username,password:e.password}})};return Object(l["useEffect"])((()=>{if(!f.isLoading&&f.data){var e=f.data;1===e.code?o===C.Login?(F.a.set("credentials",e.token,null!==d&&void 0!==d&&d.remember?{expires:7}:{}),L["a"].replace("/editor")):(i(C.Login),N["default"].success("\u6ce8\u518c\u6210\u529f\uff0c\u8bf7\u767b\u5f55\uff01",2)):N["default"].error(e.data.message||"\u672a\u77e5\u9519\u8bef")}}),[f]),Object(l["useEffect"])((()=>()=>{r.resetFields(),b(r.getFieldsValue)}),[o,r]),Object(K["jsxs"])(K["Fragment"],{children:[Object(K["jsx"])(M["a"],{children:Object(K["jsxs"])("div",{className:"loginPage",style:{backgroundImage:"url(".concat(H.a,")")},children:[Object(K["jsx"])("div",{className:"header",children:o===C.Login?Object(K["jsx"])("div",{onClick:()=>i(C.Register),children:"\u6ca1\u6709\u8d26\u53f7\uff0c\u70b9\u51fb\u6ce8\u518c"}):Object(K["jsx"])("div",{onClick:()=>i(C.Login),children:"\u5df2\u6709\u8d26\u53f7\uff0c\u70b9\u51fb\u767b\u5f55"})}),Object(K["jsxs"])("div",{className:"formWrapper",children:[Object(K["jsx"])("div",{className:"formTitle",children:0===o?"\u7528\u6237\u767b\u5f55":"\u7528\u6237\u6ce8\u518c"}),Object(K["jsx"])("div",{className:"formBox",children:Object(K["jsxs"])(P["a"],{name:"basic",initialValues:{remember:!1},labelAlign:"left",colon:!1,form:r,onValuesChange:v,onFinish:O,children:[Object(K["jsx"])(P["a"].Item,{wrapperCol:_,name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"},e=>{e.getFieldValue;return{validator(e,a){var t=/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/;return!a||t.test(a)?Promise.resolve():Promise.reject(new Error("\u7528\u6237\u540d\u4e0d\u80fd\u5305\u542b\u7279\u6b8a\u5b57\u7b26\uff0c\u53ea\u80fd\u4f7f\u7528\u6570\u5b57\u3001\u5b57\u6bcd\u3001\u4e2d\u6587!"))}}}],children:Object(K["jsx"])(k["a"],{placeholder:"\u7528\u6237\u540d",autoComplete:"off"})}),Object(K["jsx"])(P["a"].Item,{wrapperCol:_,name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}],children:Object(K["jsx"])(k["a"].Password,{placeholder:"\u5bc6\u7801",autoComplete:"off"})}),o===C.Register?Object(K["jsxs"])(K["Fragment"],{children:[Object(K["jsx"])(P["a"].Item,{wrapperCol:_,name:"confirm _password",rules:[{required:!0,message:"\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801\u8fdb\u884c\u786e\u8ba4"},e=>{var a=e.getFieldValue;return{validator(e,t){return t&&a("password")!==t?Promise.reject(new Error("\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4!")):Promise.resolve()}}}],children:Object(K["jsx"])(k["a"].Password,{placeholder:"\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801\u8fdb\u884c\u786e\u8ba4",autoComplete:"off"})}),Object(K["jsx"])(P["a"].Item,{wrapperCol:_,children:Object(K["jsx"])(E["a"],{type:"primary",htmlType:"submit",children:"\u6ce8\u518c"})})]}):null,o===C.Login?Object(K["jsxs"])(K["Fragment"],{children:[Object(K["jsxs"])(P["a"].Item,{wrapperCol:_,className:"remember-form-item",children:[Object(K["jsx"])(P["a"].Item,{name:"remember",valuePropName:"checked",noStyle:!0,children:Object(K["jsx"])(w,{children:"\u8bb0\u4f4f\u6211"})}),Object(K["jsx"])("div",{className:"forgetBtn",children:"\u5fd8\u8bb0\u5bc6\u7801"})]}),Object(K["jsx"])(P["a"].Item,{wrapperCol:_,children:Object(K["jsx"])(E["a"],{type:"primary",htmlType:"submit",children:"\u767b\u5f55"})})]}):null]})})]})]})}),f.isLoading?Object(K["jsx"])(R["a"],{full:!0}):null]})};a["default"]=B},KCY9:function(e,a,t){},bHDr:function(e,a,t){e.exports=t.p+"img/login_bg.f343b0a6.jpg"},oMEu:function(e,a,t){}}]);